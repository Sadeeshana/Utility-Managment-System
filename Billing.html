<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Billing/Payments</title>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:wght@400;500;600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <style>
    body {
      font-family: "IBM Plex Sans", sans-serif;
      background-color: #F5F6FA;
      margin: 0;
      padding: 0;
    }

    /* Header Bar */
    .header {
      background-color: #ffffff;
      color: #000;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 12px 20px;
      border-bottom: 2px solid #000;
    }

    .header h2 {
      margin: 0;
      font-size: 20px;
      font-weight: 600;
    }

    .header-icons {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .material-icons {
      vertical-align: middle;
      cursor: pointer;
    }

    .back-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 36px;
      height: 36px;
      background-color: #f0f0f0;
      border: 1px solid #000;
      border-radius: 50%;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .back-btn:hover {
      background-color: #e0e0e0;
    }

    /* Layout */
    .container {
      display: flex;
      justify-content: space-between;
      gap: 20px;
      padding: 30px;
      max-width: 1200px;
      margin: auto;
    }

    .section {
      background: #fff;
      flex: 1;
      border: 2px solid #0A3D62;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    h3 {
      margin-top: 0;
      color: #333;
      font-size: 17px;
      margin-bottom: 10px;
    }

    /* Search Input */
    .input-with-icon {
      position: relative;
      display: flex;
      align-items: center;
      border-radius: 8px;
      background: #fff;
      margin-top: 8px;
      transition: border-color 0.3s, box-shadow 0.3s;
    }

    .input-with-icon input {
      border: none;
      outline: none;
      width: 100%;
      padding: 10px 40px 10px 10px;
      font-size: 14px;
      font-family: inherit;
      border-radius: 8px;
      background: #fff;
      transition: box-shadow 0.3s, border 0.3s;
    }

    .input-with-icon input.typing {
      border: 2px solid #E58E26;
      box-shadow: 0 0 4px #E58E26;
    }

    .input-with-icon .material-icons {
      position: absolute;
      right: 10px;
      color: #000;
      cursor: pointer;
    }

    /* Inputs */
    input[type="text"], input[type="number"], select {
      width: 100%;
      padding: 8px;
      margin: 6px 0;
      border-radius: 30px;
      border: 1px solid #ccc;
      font-size: 14px;
      box-sizing: border-box;
      font-family: inherit;
    }

    input[type="text"]:focus, input[type="number"]:focus, select:focus {
      border-color: #E58E26;
      outline: none;
    }

    /* Results Box */
    .results {
      background: #ffffff;
      border: 2px solid #E58E26;
      border-radius: 30px;
      padding: 20px;
      margin: 10px 0;
    }

    /* Warning */
    .warning {
      background-color: #ffe5e5;
      color: #b30000;
      font-weight: 600;
      border-radius: 30px;
      text-align: left;
      padding: 10px;
      margin: 15px 0;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    /* Table */
    .bill-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 14px;
      margin-top: 10px;
    }

    .bill-table th, .bill-table td {
      padding: 6px;
      border-bottom: 1px solid #ddd;
      text-align: left;
    }

    .profile-name {
      display: flex;
      align-items: center;
      gap: 6px;
      font-weight: 500;
    }

    .highlight-box {
      border: 2px solid #E58E26;
      background: white;
      padding: 10px;
      border-radius: 30px;
      width: fit-content;
      margin-top: 10px;
    }

    /* Payment */
    .payment-methods {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }

    .payment-methods button {
      flex: 1;
      background-color: #e0e0e0;
      color: #333;
      border: none;
      border-radius: 30px;
      padding: 10px 0;
      font-weight: 500;
      cursor: pointer;
    }

    .payment-methods button.active {
      background-color: #0A3D62;
      color: white;
    }

    .process-btn {
      background-color: #0A3D62;
      color: white;
      border: none;
      padding: 10px;
      font-size: 15px;
      border-radius: 30px;
      cursor: pointer;
      margin-top: 10px;
      width: 100%;
    }

    .process-btn:hover {
      background-color: #082c48;
    }

    .receipt-options {
      margin-top: 10px;
      display: flex;
      flex-direction: column;
      font-size: 14px;
      gap: 5px;
    }

    .receipt-options label {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
    }

    @media (max-width: 900px) {
      .container {
        flex-direction: column;
      }
    }
  </style>
</head>

<body>
  <div class="header">
    <div class="back-btn" onclick="goBack()"><span class="material-icons">arrow_back</span></div>
    <h2>Billing/Payments</h2>
    <div class="header-icons">
      <span class="material-icons">search</span>
      <span class="material-icons">person</span>
    </div>
  </div>

  <div class="container">
    <!-- Customer Lookup -->
    <div class="section">
      <h3>Customer & Bill Lookup</h3>

      <div class="input-with-icon">
        <input type="text" id="searchInput" placeholder="Account Number, Name, Address">
        <span class="material-icons">search</span>
      </div>

      <div class="results">
        <strong>Results:</strong><br>
        John Doe<br>
        Main Road, Colombo
      </div>

      <label for="utilityType">Utility Type:</label>
      <select id="utilityType">
        <option>Water</option>
        <option selected>Electricity</option>
        <option>Gas</option>
      </select>
    </div>

    <!-- Bill Info -->
    <div class="section">
      <h3>Account & Bill Information</h3>
      <p class="profile-name"><span class="material-icons">person</span> John Doe</p>

      <div class="highlight-box"><strong>Total Amount:</strong> Rs.1500.00</div>
      <p><strong>Due Date:</strong> Nov 02, 2025</p>

      <div class="warning">
        <span class="material-icons">warning</span>
        Disconnection warning!
      </div>

      <table class="bill-table">
        <tr><th>Bill Date</th><th>Due Date</th><th>Amount</th></tr>
        <tr><td>Oct 25</td><td>Nov 02</td><td>Rs.1500</td></tr>
        <tr><td>Sep 26</td><td>Oct 02</td><td>Rs.2200</td></tr>
        <tr><td>Aug 25</td><td>Sep 02</td><td>Rs.3200</td></tr>
        <tr><td>Jul 25</td><td>Aug 02</td><td>Rs.4500</td></tr>
      </table>

      <p><strong>Last Payment:</strong> Oct 01, 2025</p>
    </div>

    <!-- Payment -->
    <div class="section">
      <h3>Payment</h3>
      <p>Select the payment method:</p>
      <div class="payment-methods">
        <button id="cardBtn" class="active">Card</button>
        <button id="cashBtn">Cash</button>
      </div>

      <label for="amountToPay">Amount to pay</label>
      <input type="number" id="amountToPay" value="" min="0" step="0.01">

      <label for="amountGiven">Amount given</label>
      <input type="number" id="amountGiven" value="" min="0" step="0.01">

      <label for="change">Change</label>
      <input type="text" id="change" readonly value="">

      <div class="receipt-options">
        <label><input type="radio" name="receiptOption" value="print"> Print Receipt</label>
        <label><input type="radio" name="receiptOption" value="email"> Email Receipt</label>
        <label><input type="radio" name="receiptOption" value="sms"> SMS Receipt</label>
      </div>

      <button class="process-btn" id="processPayment">Process Payment</button>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      window.goBack = function () {
        window.history.back();
      };

      // Highlight search input when typing
      const searchInput = document.getElementById("searchInput");
      searchInput.addEventListener("input", () => {
        if (searchInput.value.trim() !== "") {
          searchInput.classList.add("typing");
        } else {
          searchInput.classList.remove("typing");
        }
      });

      // Payment method toggle
      const cardBtn = document.getElementById("cardBtn");
      const cashBtn = document.getElementById("cashBtn");

      function setActiveMethod(el) {
        cardBtn.classList.remove('active');
        cashBtn.classList.remove('active');
        el.classList.add('active');
      }

      cardBtn.addEventListener('click', () => setActiveMethod(cardBtn));
      cashBtn.addEventListener('click', () => setActiveMethod(cashBtn));

      // Change calculation
      const amountToPay = document.getElementById("amountToPay");
      const amountGiven = document.getElementById("amountGiven");
      const change = document.getElementById("change");

      function updateChange() {
        const pay = parseFloat(amountToPay.value);
        const given = parseFloat(amountGiven.value);
        if (isNaN(pay) || isNaN(given)) {
          change.value = "";
          return;
        }
        const diff = given - pay;
        change.value = diff >= 0 ? `Rs. ${diff.toFixed(2)}` : "Insufficient";
      }

      amountToPay.addEventListener('input', updateChange);
      amountGiven.addEventListener('input', updateChange);
      updateChange();

      // Process payment with validation
      document.getElementById("processPayment").addEventListener("click", () => {
        const pay = parseFloat(amountToPay.value);
        const given = parseFloat(amountGiven.value);
        const selectedReceipt = document.querySelector('input[name="receiptOption"]:checked');

        if (!selectedReceipt) {
          alert('⚠️ Please select one receipt type before processing payment.');
          return;
        }

        if (amountToPay.value.trim() === "" || isNaN(pay) || pay <= 0) {
          alert('⚠️ Please enter a valid "Amount to Pay".');
          amountToPay.focus();
          return;
        }

        if (amountGiven.value.trim() === "" || isNaN(given)) {
          alert('⚠️ Please enter a valid "Amount Given".');
          amountGiven.focus();
          return;
        }

        if (given < pay) {
          alert('⚠️ "Amount Given" must be greater than or equal to "Amount to Pay".');
          amountGiven.focus();
          return;
        }

        const method = cardBtn.classList.contains('active') ? 'Card' : 'Cash';
        const changeValue = (given - pay).toFixed(2);
        const receiptType = selectedReceipt.value;

        alert(`✅ Payment processed successfully!
Method: ${method}
Amount paid: Rs. ${pay.toFixed(2)}
Amount given: Rs. ${given.toFixed(2)}
Change: Rs. ${changeValue}
Receipt type: ${receiptType.toUpperCase()}`);
      });
    });
  </script>
</body>
</html>
